<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Manager</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input, button { margin: 5px; padding: 5px; }
        .done { text-decoration: line-through; color: gray; }
    </style>
</head>
<body>
<h1>üìù Task Manager</h1>

<input type="text" id="taskInput" placeholder="New task description">
<button onclick="addTask()">Add Task</button>

<h2>üìã Tasks</h2>
<ul id="taskList"></ul>

<script>
    const API_BASE = '/tasks';

    async function loadTasks() {
      const res = await fetch(API_BASE);
      const tasks = await res.json();
      const list = document.getElementById('taskList');
      list.innerHTML = '';
      tasks.forEach(task => {
        const item = document.createElement('li');
        item.innerHTML = `
          <span class="${task.done ? 'done' : ''}">${task.description}</span>
          ${!task.done ? `<button onclick="markDone(${task.id})">‚úÖ Mark Done</button>` : ''}
        `;
        list.appendChild(item);
      });
    }

    async function addTask() {
      const desc = document.getElementById('taskInput').value.trim();
      if (!desc) return;
      await fetch(API_BASE, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ description: desc })
      });
      document.getElementById('taskInput').value = '';
      loadTasks();
    }

    async function markDone(id) {
      await fetch(`${API_BASE}/${id}/done`, { method: 'POST' });
      loadTasks();
    }

    // Initial load
    loadTasks();
</script>
</body>
</html>